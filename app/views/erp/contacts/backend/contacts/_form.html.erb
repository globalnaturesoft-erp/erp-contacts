<%= form_for([erp_contacts, :backend, contact], html: {multipart: true}) do |f| %>
    <div class="form-body">        
        <div class="row">
            <div class="col-md-6">
                <div class="portlet light bordered">
                    <div class="portlet-body form">
                        <div class="row">
                            <div class="col-md-4">
                                <%= erp_form_control('image', {
                                    img_src: contact.image_url.medium,
                                    name: 'contact[image_url]'
                                }) %>
                            </div>
                            <div class="col-md-8">
                                <%= erp_form_control("radio", {
                                    name: 'contact[contact_type]',
                                    label: t('.type'),
                                    value: @contact.contact_type,
                                    options: Erp::Contacts::Contact.get_type_options()
                                }) %>
                                <%= erp_form_control("text", {
                                    name: 'contact[name]',
                                    value: contact.name,
                                    label: t('.name'),
                                    placeholder: t('.enter_full_name'),
                                    required: true,
                                    errors: contact.errors.full_messages_for(:name)
                                }) %>
                                <div class="hiddable-control"
                                     data-cond-item="input[name='contact[contact_type]']"
                                     data-cond-value="<%= Erp::Contacts::Contact::TYPE_PERSON %>">
                                    <%= erp_form_control("dataselect", {
                                        name: 'contact[company_id]',
                                        value: contact.company_id,
                                        text: contact.display_company,
                                        label: t('.company'),
                                        placeholder: t('.select_company'),
                                        url: erp_contacts.dataselect_backend_contacts_path(format: 'json'),
                                        create: {
                                            url: erp_contacts.new_backend_contact_url(contact_type: Erp::Contacts::Contact::TYPE_COMPANY),
                                            title: t('.create'),
                                            container_selector: '.new_contact',
                                            input_selector: 'input[name="contact[name]"]',
                                            modal_size: "full"
                                        },
                                        edit: {
                                            url: erp_contacts.edit_backend_contact_url(id: ':value'),
                                            title: t('contacts.contacts.edit'),
                                            container_selector: '.edit_contact',
                                        }
                                    }) %>
                                </div>
                            </div>
                        </div>
                        <%= erp_form_control('date', {
                            label: t('.birthday'),
                            name: 'contact[birthday]',
                            value: contact.birthday,
                            placeholder: t('.choose_birthday')
                        }) %>
                        <div class="hiddable-control"
                             data-cond-item="input[name='contact[contact_type]']"
                             data-cond-value="<%= Erp::Contacts::Contact::TYPE_PERSON %>">
                            <div class="form-group">
                                <%= erp_form_control('select', {
                                    label: t('.gender'),
                                    name: 'abc',
                                    id: 'abc',
                                    options: [
                                        {value: '', text: t('.none')},
                                        {value: 'male', text: t('.male')},
                                        {value: 'female', text: t('.female')}    
                                    ]
                                }) %>
                            </div>
                        </div>
                        <%= erp_form_control("text", {
                            name: 'contact[address_1]',
                            value: contact.address_1,                   
                            label: t('.address_1'),
                            placeholder: t('.enter_address_1')
                        }) %>
                        <%= erp_form_control("text", {
                            name: 'contact[address_2]',
                            value: contact.address_2,                   
                            label: t('.address_2'),
                            placeholder: t('.enter_address_2')
                        }) %>
                        <div class="form-group">
                            <%= erp_form_control("dataselect", {
                                name: 'contact[country_id]',
                                value: contact.country_id,
                                text: contact.country_name,
                                placeholder: t('.choose_country'),
                                label: t('.country'),
                                url: erp_areas.dataselect_backend_countries_path(format: 'json'),
                                create: {
                                    url: erp_areas.new_backend_country_path,
                                    title: t('.create'),
                                    container_selector: '.new_country',
                                    input_selector: 'input[name="country[name]"]'
                                },
                                required: true,
                                errors: contact.errors.full_messages_for(:country_id)
                            }) %>
                        </div> 
                        <div class="row">
                            <div class="col-md-4">
                                <%= erp_form_control("text", {
                                    name: 'contact[city]',
                                    value: contact.city,                   
                                    label: t('.city'),
                                    placeholder: t('.choose_city')
                                }) %>
                            </div>
                            <div class="col-md-4">
                                <%= erp_form_control("dataselect", {
                                    name: 'contact[state_id]',
                                    value: contact.state_id,
                                    text: contact.state_name,
                                    placeholder: t('.choose_state'),
                                    label: t('.state'),
                                    url: erp_areas.dataselect_backend_states_path(format: 'json'),
                                    create: {
                                        url: erp_areas.new_backend_state_path,
                                        title: t('.create'),
                                        container_selector: '.new_state',
                                        input_selector: 'input[name="state[name]"]'
                                    },
                                    required: true,
                                    errors: contact.errors.full_messages_for(:state_id)
                                }) %>   
                            </div>
                            <div class="col-md-4">
                                <%= erp_form_control("text", {
                                    name: 'contact[zip]',
                                    value: contact.zip,
                                    label: t('.zip_code'),
                                    placeholder: t('.enter_zip_code')
                                }) %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="portlet light bordered">
                    <div class="portlet-body form">
                        <%= erp_form_control("text", {
                            name: 'contact[job_position]',
                            value: contact.job_position,                   
                            label: t('.job_position'),
                            placeholder: t('.eg_job_position')
                        }) %>
                        <%= erp_form_control("text", {
                            name: 'contact[phone]',
                            value: contact.phone,                   
                            label: t('.phone'),
                            placeholder: t('.enter_phone_numbers')
                        }) %>
                        <%= erp_form_control("text", {
                            name: 'contact[mobile]',
                            value: contact.mobile,                   
                            label: t('.mobile'),
                            placeholder: t('.enter_mobile_numbers')
                        }) %>
                        <%= erp_form_control("email", {
                            name: 'contact[email]',
                            value: contact.email,                   
                            label: t('.email_address'),
                            help: "user@domain.com",
                            placeholder: t('.enter_email_address')
                        }) %>
                        <%= erp_form_control("text", {
                            name: 'contact[website]',
                            value: contact.website,                   
                            label: t('.website'),
                            placeholder: t('.eg_website')
                        }) %>
                        <%= erp_form_control("text", {
                            name: '',
                            value: '',                   
                            label: t('.tax'),
                            placeholder: t('.enter_tax')
                        }) %>
                        <%= erp_form_control("text", {
                            name: 'contact[fax]',
                            value: contact.fax,
                            label: t('.fax'),
                            placeholder: t('.enter_fax'),
                        }) %>
                        <%= erp_form_control("dataselect", {
                            name: 'contact[title_id]',
                            value: contact.title_id,
                            text: contact.display_title,
                            placeholder: t('.choose_title'),
                            label: t('.title'),
                            url: erp_contacts.dataselect_backend_titles_path(format: 'json'),
                            create: {
                                url: erp_contacts.new_backend_title_url,
                                title: t('.create'),
                                container_selector: '.new_title',
                                input_selector: 'input[name="title[title]"]'
                            }
                        }) %>
                        <%= erp_form_control("dataselect", {
                            name: 'contact[tag_ids][]',
                            value: '',
                            values: (contact.tags.map {|tag| {text: tag.name, value: tag.id}}),
                            text: '',
                            placeholder: '',
                            multiple: true,
                            label: t('contacts.contacts.tags'),
                            url: erp_contacts.dataselect_backend_tags_path(format: 'json'),
                            create: {
                                url: erp_contacts.new_backend_tag_url,
                                title: t('.create'),
                                container_selector: '.new_tag',
                                input_selector: 'input[name="tag[name]"]'
                            }
                        }) %>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="portlet light bordered">
                    <div class="portlet-body form">
                        <div class="tabbable-custom ">
                            <ul class="nav nav-tabs ">
                                <li class="active">
                                    <a href="#tab_5_1" data-toggle="tab"> <%= t('.contacts_address') %> </a>
                                </li>
                                <li>
                                    <a href="#tab_5_2" data-toggle="tab"> <%= t('.internal_notes') %> </a>
                                </li>
                                <li>
                                    <a href="#tab_5_3" data-toggle="tab"> <%= t('.sales_purchases') %> </a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane active" id="tab_5_1">
                                    <%= erp_form_control("addablelist", {
                                        button_text: t('.add'),
                                        create: {
                                            url: erp_contacts.new_backend_contact_contact_url(contact_id: (contact.id.present? ? contact.id : 0)),
                                            title: t('.create_contact'),
                                            container_selector: '.new_contact',
                                            modal_size: 'lg',
                                            list_partial: 'backend/contacts_contacts/contact',
                                            list_items: contact.contacts,
                                            list_item: :contact
                                        }
                                    }) %>
                                </div>
                                <div class="tab-pane" id="tab_5_2">
                                    <%= erp_form_control("textarea", {
                                        name: 'contact[internal_note]',
                                        value: contact.internal_note,
                                        label: '',
                                        placeholder: t('.enter_internal_notes')
                                    }) %>
                                </div>                
                                <div class="tab-pane" id="tab_5_3">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h4><%= t('.sale') %></h4>
                                            <%= erp_form_control('checkbox', {
                                                name: 'contact[is_customer]',
                                                id: 'contact_is_customer',
                                                value: contact.is_customer,
                                                not_selected_value: 'false',
                                                options: [{value: 'true', text: t('.is_a_customer')}]
                                            }) %>
                                            <%= erp_form_control("dataselect", {
                                                name: 'contact[salesperson_id]',
                                                value: '',
                                                text: '',
                                                placeholder: t('.choose_salesperson'),
                                                label: t('.salesperson'),
                                                url: erp.dataselect_backend_users_path(format: 'json'),
                                                options: [{value: '1', text: t('.is_a_customer')}]
                                            }) %>
                                        </div>
                                        <div class="col-md-6">
                                            <h4><%= t('.purchases') %></h4>
                                            <%= erp_form_control('checkbox', {
                                                name: 'contact[is_vendor]',
                                                id: 'contact_is_vendor',
                                                value: contact.is_vendor,
                                                not_selected_value: 'false',
                                                options: [{value: 'true', text: t('.is_a_vendor')}]
                                            }) %>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <%= erp_component('button/save', {
        text: t('.submit')
    }) %>
    <%= erp_component('button/cancel', {
        text: t('.cancel'),
        href: erp_contacts.backend_contacts_path
    }) %>
<% end %>